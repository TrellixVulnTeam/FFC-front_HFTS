{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/maaya/ffc_finalpro/User_Interface/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\maaya\\\\ffc_finalpro\\\\User_Interface\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from\"react\";import{useQuery}from\"react-query\";import{deleteTest,getPatientTests}from\"../../../api/tests-api\";import withReactContent from\"sweetalert2-react-content\";import Swal from\"sweetalert2\";import{format}from\"date-fns\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var StartTestSwal=withReactContent(Swal);var NextTestCard=function NextTestCard(){var _JSON$parse=JSON.parse(localStorage.getItem(\"user\")),id=_JSON$parse.id;var _useQuery=useQuery([\"patientTests\",id],function(){return getPatientTests(id);}),data=_useQuery.data,isLoading=_useQuery.isLoading,isError=_useQuery.isError,refetch=_useQuery.refetch;var _ref=data||{},_ref$tests=_ref.tests,tests=_ref$tests===void 0?[]:_ref$tests;var latestTest=tests[0];var _ref2=latestTest||{},testName=_ref2.testName,code=_ref2.code,foodGuide=_ref2.foodGuide,date=_ref2.date;var onStartTest=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(testId,patientId){var _yield$StartTestSwal$,isConfirmed;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return StartTestSwal.fire({title:/*#__PURE__*/_jsxs(\"span\",{children:[\"Test Confirm\",\" \"]}),html:/*#__PURE__*/_jsxs(\"p\",{children:[\"Your Test code is   \",/*#__PURE__*/_jsxs(\"span\",{className:\"badge badge-success fs-4\",children:[\" \",code]})]}),icon:\"info\",buttonsStyling:false,showConfirmButton:true,showCancelButton:true,customClass:{confirmButton:\"btn btn-outline btn-outline-dashed btn-outline-danger btn-active-light-danger\",cancelButton:\"btn btn-outline btn-outline-dashed btn-outline-dark btn-active-light-dark\"}});case 2:_yield$StartTestSwal$=_context.sent;isConfirmed=_yield$StartTestSwal$.isConfirmed;if(!isConfirmed){_context.next=9;break;}_context.next=7;return deleteTest(testId,patientId);case 7:_context.next=9;return refetch();case 9:case\"end\":return _context.stop();}}},_callee);}));return function onStartTest(_x,_x2){return _ref3.apply(this,arguments);};}();console.log(date);return/*#__PURE__*/_jsx(\"div\",{className:\"card bg-dark h-100 \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-white\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"d-inline-block position-relative ms-2 fs-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Your Next Test Details\"}),/*#__PURE__*/_jsx(\"span\",{className:\"d-inline-block position-absolute h-4px bottom-0 end-0 start-0 bg-success translate rounded\"})]}),!isLoading&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-7 mt-7\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-lg-6 fw-bold text-white\",children:\"Test Name:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fw-bolder fs-6 text-white\",children:testName})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-7\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-lg-6 fw-bold text-white\",children:\"Test Date:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fw-bolder fs-6 text-white\",children:format(new Date(parseInt(date)),\"d-M-yyyy - a zHH :mm\")})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-start\",children:foodGuide.map(function(_ref4,i){var food=_ref4.food,amount=_ref4.amount,description=_ref4.description,timeBeforeTest=_ref4.timeBeforeTest,timeType=_ref4.timeType;return/*#__PURE__*/_jsxs(\"div\",{className:\"border-primary border mx-5 p-5 flex-grow-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white\",children:\"Guide - \".concat(i)}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-7\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-lg-4 fw-bold\",children:\"Food:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-8\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fw-bolder fs-6\",children:food})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-7\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-lg-4 fw-bold \",children:\"Amount:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-8 fv-row\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold  fs-6\",children:amount})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-7\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-lg-4 fw-bold \",children:\"Description:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-8 fv-row\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold  fs-6\",children:description})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-7\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-lg-4 fw-bold flex-grow-1 \",children:\"How long before test to eat\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-8 fv-row\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold  fs-6\",children:\"\".concat(timeBeforeTest,\" - \").concat(timeType===\"0\"?\"Minutes\":\"Hours\")})})]})]});})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mt-5 float-end \",onClick:onStartTest,children:\"Start the test\"})]})]})});};export default NextTestCard;","map":{"version":3,"names":["React","useQuery","deleteTest","getPatientTests","withReactContent","Swal","format","StartTestSwal","NextTestCard","JSON","parse","localStorage","getItem","id","data","isLoading","isError","refetch","tests","latestTest","testName","code","foodGuide","date","onStartTest","testId","patientId","fire","title","html","icon","buttonsStyling","showConfirmButton","showCancelButton","customClass","confirmButton","cancelButton","isConfirmed","console","log","Date","parseInt","map","i","food","amount","description","timeBeforeTest","timeType"],"sources":["C:/Users/maaya/ffc_finalpro/User_Interface/frontend/src/components/app/Patients/NextTestCard.js"],"sourcesContent":["import React from \"react\";\r\nimport { useQuery } from \"react-query\";\r\nimport { deleteTest, getPatientTests } from \"../../../api/tests-api\";\r\nimport withReactContent from \"sweetalert2-react-content\";\r\nimport Swal from \"sweetalert2\";\r\nimport { format } from \"date-fns\";\r\n\r\nconst StartTestSwal = withReactContent(Swal);\r\n\r\nconst NextTestCard = () => {\r\n  const { id } = JSON.parse(localStorage.getItem(\"user\"));\r\n  const { data, isLoading, isError, refetch } = useQuery(\r\n    [\"patientTests\", id],\r\n    () => getPatientTests(id)\r\n  );\r\n  const { tests = [] } = data || {};\r\n  const latestTest = tests[0];\r\n  const { testName, code, foodGuide, date } = latestTest || {};\r\n  const onStartTest = async (testId, patientId) => {\r\n    const { isConfirmed } = await StartTestSwal.fire({\r\n      title: <span>{`Test Confirm`} </span>,\r\n      html: (\r\n        <p>\r\n          {`Your Test code is   `}\r\n          <span className=\"badge badge-success fs-4\"> {code}</span>\r\n        </p>\r\n      ),\r\n      icon: \"info\",\r\n      buttonsStyling: false,\r\n      showConfirmButton: true,\r\n      showCancelButton: true,\r\n      customClass: {\r\n        confirmButton:\r\n          \"btn btn-outline btn-outline-dashed btn-outline-danger btn-active-light-danger\",\r\n        cancelButton:\r\n          \"btn btn-outline btn-outline-dashed btn-outline-dark btn-active-light-dark\",\r\n      },\r\n    });\r\n    if (isConfirmed) {\r\n      await deleteTest(testId, patientId);\r\n      await refetch();\r\n    }\r\n  };\r\n  console.log(date);\r\n  return (\r\n    <div className=\"card bg-dark h-100 \">\r\n      <div className=\"card-body text-white\">\r\n        <span className=\"d-inline-block position-relative ms-2 fs-2\">\r\n          <span>{`Your Next Test Details`}</span>\r\n          <span className=\"d-inline-block position-absolute h-4px bottom-0 end-0 start-0 bg-success translate rounded\" />\r\n        </span>\r\n        {!isLoading && (\r\n          <>\r\n            <div className=\"row mb-7 mt-7\">\r\n              <label className=\"col-lg-6 fw-bold text-white\">Test Name:</label>\r\n              <div className=\"col-lg-6\">\r\n                <span className=\"fw-bolder fs-6 text-white\">{testName}</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mb-7\">\r\n              <label className=\"col-lg-6 fw-bold text-white\">Test Date:</label>\r\n              <div className=\"col-lg-6\">\r\n                <span className=\"fw-bolder fs-6 text-white\">\r\n                  {format(new Date(parseInt(date)), \"d-M-yyyy - a zHH :mm\")}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div className=\"d-flex justify-content-start\">\r\n              {foodGuide.map(\r\n                (\r\n                  { food, amount, description, timeBeforeTest, timeType },\r\n                  i\r\n                ) => (\r\n                  <div className=\"border-primary border mx-5 p-5 flex-grow-1\">\r\n                    <h3 className=\"text-white\">{`Guide - ${i}`}</h3>\r\n                    <div className=\"row mb-7\">\r\n                      <label className=\"col-lg-4 fw-bold\">Food:</label>\r\n                      <div className=\"col-lg-8\">\r\n                        <span className=\"fw-bolder fs-6\">{food}</span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"row mb-7\">\r\n                      <label className=\"col-lg-4 fw-bold \">Amount:</label>\r\n                      <div className=\"col-lg-8 fv-row\">\r\n                        <span className=\"fw-bold  fs-6\">{amount}</span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"row mb-7\">\r\n                      <label className=\"col-lg-4 fw-bold \">Description:</label>\r\n                      <div className=\"col-lg-8 fv-row\">\r\n                        <span className=\"fw-bold  fs-6\">{description}</span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"row mb-7\">\r\n                      <label className=\"col-lg-4 fw-bold flex-grow-1 \">\r\n                        How long before test to eat\r\n                      </label>\r\n                      <div className=\"col-lg-8 fv-row\">\r\n                        <span className=\"fw-bold  fs-6\">\r\n                          {`${timeBeforeTest} - ${\r\n                            timeType === \"0\" ? \"Minutes\" : \"Hours\"\r\n                          }`}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              )}\r\n            </div>\r\n            <button\r\n              className=\"btn btn-primary mt-5 float-end \"\r\n              onClick={onStartTest}\r\n            >\r\n              Start the test\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NextTestCard;"],"mappings":"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"},"metadata":{},"sourceType":"module"}