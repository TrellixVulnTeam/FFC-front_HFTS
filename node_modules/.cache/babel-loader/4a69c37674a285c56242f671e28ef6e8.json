{"ast":null,"code":"import _objectSpread from\"C:/Users/maaya/ffc_finalpro/User_Interface/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/maaya/ffc_finalpro/User_Interface/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\maaya\\\\ffc_finalpro\\\\User_Interface\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import Input from\"../../core/form/input/Input\";import{FormProvider,useForm}from\"react-hook-form\";import{login,newPatientPassword}from\"../../../api/auth-api\";import useAuth from\"../../../hooks/useAuth\";import LoginSubheader from\"../LoginSubheader\";import{useNavigate,useSearchParams}from\"react-router-dom\";import FormError from\"../../core/form/FormError\";import useRequest from\"../../../hooks/useRequest\";import SubmitBtn from\"../../core/form/submit-btn/SubmitBtn\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ERRORS_MAP={default:\"Something went wrong, please try again\"};var PatientResetPasswordForm=function PatientResetPasswordForm(_ref){var setIsOpen=_ref.setIsOpen;var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(newPasswordForm){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return newPatientPassword(newPasswordForm);case 2:user=JSON.parse(localStorage.getItem(\"user\"));localStorage.setItem(\"user\",JSON.stringify(_objectSpread(_objectSpread({},user),{},{isPasswordSet:true})));setIsOpen(false);case 5:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();var _useRequest=useRequest(onSubmit,{}),onNewPassword=_useRequest.onRequest;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:onNewPassword,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-10\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-dark mb-3\",children:\"Choose a new password\"})}),/*#__PURE__*/_jsx(FormError,{}),/*#__PURE__*/_jsx(Input,{name:\"password\",label:\"New Password\",type:\"password\",rules:{required:\"Password is required\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"separator my-5\"}),/*#__PURE__*/_jsx(SubmitBtn,{submitText:\"Login\"})]});};export default PatientResetPasswordForm;","map":{"version":3,"names":["Input","FormProvider","useForm","login","newPatientPassword","useAuth","LoginSubheader","useNavigate","useSearchParams","FormError","useRequest","SubmitBtn","ERRORS_MAP","default","PatientResetPasswordForm","setIsOpen","onSubmit","newPasswordForm","user","JSON","parse","localStorage","getItem","setItem","stringify","isPasswordSet","onNewPassword","onRequest","required"],"sources":["C:/Users/maaya/ffc_finalpro/User_Interface/frontend/src/components/auth/PatientResetPassword/PatientResetPasswordForm.js"],"sourcesContent":["import Input from \"../../core/form/input/Input\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { login, newPatientPassword } from \"../../../api/auth-api\";\r\nimport useAuth from \"../../../hooks/useAuth\";\r\nimport LoginSubheader from \"../LoginSubheader\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport FormError from \"../../core/form/FormError\";\r\nimport useRequest from \"../../../hooks/useRequest\";\r\nimport SubmitBtn from \"../../core/form/submit-btn/SubmitBtn\";\r\n\r\nconst ERRORS_MAP = {\r\n  default: \"Something went wrong, please try again\",\r\n};\r\n\r\nconst PatientResetPasswordForm = ({ setIsOpen }) => {\r\n  const onSubmit = async (newPasswordForm) => {\r\n    await newPatientPassword(newPasswordForm);\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    localStorage.setItem(\r\n      \"user\",\r\n      JSON.stringify({ ...user, isPasswordSet: true })\r\n    );\r\n    setIsOpen(false);\r\n  };\r\n  const { onRequest: onNewPassword } = useRequest(onSubmit, {});\r\n\r\n  return (\r\n    <form onSubmit={onNewPassword}>\r\n      <div className=\"text-center mb-10\">\r\n        <h1 className=\"text-dark mb-3\">Choose a new password</h1>\r\n      </div>\r\n      <FormError />\r\n      <Input\r\n        name=\"password\"\r\n        label=\"New Password\"\r\n        type=\"password\"\r\n        rules={{\r\n          required: \"Password is required\",\r\n        }}\r\n      />\r\n      <div className=\"separator my-5\" />\r\n      <SubmitBtn submitText=\"Login\" />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PatientResetPasswordForm;\r\n"],"mappings":"uaAAA,MAAOA,CAAAA,KAAP,KAAkB,6BAAlB,CACA,OAASC,YAAT,CAAuBC,OAAvB,KAAsC,iBAAtC,CACA,OAASC,KAAT,CAAgBC,kBAAhB,KAA0C,uBAA1C,CACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CACA,MAAOC,CAAAA,cAAP,KAA2B,mBAA3B,CACA,OAASC,WAAT,CAAsBC,eAAtB,KAA6C,kBAA7C,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,2BAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,sCAAtB,C,wFAEA,GAAMC,CAAAA,UAAU,CAAG,CACjBC,OAAO,CAAE,wCADQ,CAAnB,CAIA,GAAMC,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,MAAmB,IAAhBC,CAAAA,SAAgB,MAAhBA,SAAgB,CAClD,GAAMC,CAAAA,QAAQ,2FAAG,iBAAOC,eAAP,iJACTb,CAAAA,kBAAkB,CAACa,eAAD,CADT,QAETC,IAFS,CAEFC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAFE,CAGfD,YAAY,CAACE,OAAb,CACE,MADF,CAEEJ,IAAI,CAACK,SAAL,gCAAoBN,IAApB,MAA0BO,aAAa,CAAE,IAAzC,GAFF,EAIAV,SAAS,CAAC,KAAD,CAAT,CAPe,sDAAH,kBAARC,CAAAA,QAAQ,6CAAd,CASA,gBAAqCN,UAAU,CAACM,QAAD,CAAW,EAAX,CAA/C,CAAmBU,aAAnB,aAAQC,SAAR,CAEA,mBACE,cAAM,QAAQ,CAAED,aAAhB,wBACE,YAAK,SAAS,CAAC,mBAAf,uBACE,WAAI,SAAS,CAAC,gBAAd,mCADF,EADF,cAIE,KAAC,SAAD,IAJF,cAKE,KAAC,KAAD,EACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAC,cAFR,CAGE,IAAI,CAAC,UAHP,CAIE,KAAK,CAAE,CACLE,QAAQ,CAAE,sBADL,CAJT,EALF,cAaE,YAAK,SAAS,CAAC,gBAAf,EAbF,cAcE,KAAC,SAAD,EAAW,UAAU,CAAC,OAAtB,EAdF,GADF,CAkBD,CA9BD,CAgCA,cAAed,CAAAA,wBAAf"},"metadata":{},"sourceType":"module"}