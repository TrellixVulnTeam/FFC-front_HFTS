{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/maaya/ffc_finalpro/User_Interface/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\maaya\\\\ffc_finalpro\\\\User_Interface\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect}from\"react\";import io from\"socket.io-client\";import{useQuery}from\"react-query\";import{getNotifications}from\"../../../../../api/notifications\";export var socket=io(\"https://github.com/sharon-cohen/ffc_finalpro.git\");var testEV=[\"create\",\"update\",\"delete\",\"confirm\"];var Notifications=function Notifications(){var _useQuery=useQuery(\"notifications\",getNotifications,{refetchOnWindowFocus:false}),refetch=_useQuery.refetch;useEffect(function(){var _JSON$parse=JSON.parse(localStorage.getItem(\"user\")),id=_JSON$parse.id;socket.on(\"connect\",function(){socket.emit(\"data\",id);testEV.forEach(function(ev){socket.on(\"test:\".concat(ev),/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return refetch();case 2:case\"end\":return _context.stop();}}},_callee);})));});});},[]);};export default Notifications;","map":{"version":3,"names":["React","useEffect","io","useQuery","getNotifications","socket","testEV","Notifications","refetchOnWindowFocus","refetch","JSON","parse","localStorage","getItem","id","on","emit","forEach","ev"],"sources":["C:/Users/maaya/ffc_finalpro/User_Interface/frontend/src/components/app/AppLayout/Header/components/Notifications.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport { useQuery } from \"react-query\";\r\nimport { getNotifications } from \"../../../../../api/notifications\";\r\n\r\nexport const socket = io(\"https://github.com/sharon-cohen/ffc_finalpro.git\");\r\n\r\nconst testEV = [\"create\", \"update\", \"delete\", \"confirm\"];\r\n\r\nconst Notifications = () => {\r\n  const { refetch } = useQuery(\"notifications\", getNotifications, {\r\n    refetchOnWindowFocus: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const { id } = JSON.parse(localStorage.getItem(\"user\"));\r\n    socket.on(\"connect\", () => {\r\n      socket.emit(\"data\", id);\r\n      testEV.forEach((ev) => {\r\n        socket.on(`test:${ev}`, async () => {\r\n          await refetch();\r\n        });\r\n      });\r\n    });\r\n  }, []);\r\n};\r\n\r\nexport default Notifications;\r\n"],"mappings":"+RAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,EAAP,KAAe,kBAAf,CACA,OAASC,QAAT,KAAyB,aAAzB,CACA,OAASC,gBAAT,KAAiC,kCAAjC,CAEA,MAAO,IAAMC,CAAAA,MAAM,CAAGH,EAAE,CAAC,kDAAD,CAAjB,CAEP,GAAMI,CAAAA,MAAM,CAAG,CAAC,QAAD,CAAW,QAAX,CAAqB,QAArB,CAA+B,SAA/B,CAAf,CAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1B,cAAoBJ,QAAQ,CAAC,eAAD,CAAkBC,gBAAlB,CAAoC,CAC9DI,oBAAoB,CAAE,KADwC,CAApC,CAA5B,CAAQC,OAAR,WAAQA,OAAR,CAIAR,SAAS,CAAC,UAAM,CACd,gBAAeS,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAf,CAAQC,EAAR,aAAQA,EAAR,CACAT,MAAM,CAACU,EAAP,CAAU,SAAV,CAAqB,UAAM,CACzBV,MAAM,CAACW,IAAP,CAAY,MAAZ,CAAoBF,EAApB,EACAR,MAAM,CAACW,OAAP,CAAe,SAACC,EAAD,CAAQ,CACrBb,MAAM,CAACU,EAAP,gBAAkBG,EAAlB,uEAAwB,yJAChBT,CAAAA,OAAO,EADS,uDAAxB,IAGD,CAJD,EAKD,CAPD,EAQD,CAVQ,CAUN,EAVM,CAAT,CAWD,CAhBD,CAkBA,cAAeF,CAAAA,aAAf"},"metadata":{},"sourceType":"module"}