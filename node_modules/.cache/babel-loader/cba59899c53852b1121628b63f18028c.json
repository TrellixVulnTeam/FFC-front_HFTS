{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/maaya/ffc_finalpro/User_Interface/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\maaya\\\\ffc_finalpro\\\\User_Interface\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useFormContext}from\"react-hook-form\";var useRequest=function useRequest(request,errorsMap){var _useFormContext=useFormContext(),setError=_useFormContext.setError,clearErrors=_useFormContext.clearErrors,handleSubmit=_useFormContext.handleSubmit;var onRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:clearErrors();return _context2.abrupt(\"return\",handleSubmit(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(params){var _error$response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request(params);case 3:_context.next=11;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);if(!_context.t0.response){_context.next=9;break;}return _context.abrupt(\"return\",setError(\"global\",{message:errorsMap[(_context.t0===null||_context.t0===void 0?void 0:(_error$response=_context.t0.response)===null||_error$response===void 0?void 0:_error$response.data.message)||\"default\"]}));case 9:if(_context.t0.status){_context.next=11;break;}return _context.abrupt(\"return\",setError(\"global\",{message:\"It seems there was a problem, please try again\"}));case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return function(_x2){return _ref2.apply(this,arguments);};}())(e));case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function onRequest(_x){return _ref.apply(this,arguments);};}();return{onRequest:onRequest};};export default useRequest;","map":{"version":3,"names":["useFormContext","useRequest","request","errorsMap","setError","clearErrors","handleSubmit","onRequest","e","params","response","message","data","status"],"sources":["C:/Users/maaya/ffc_finalpro/User_Interface/frontend/src/hooks/useRequest.js"],"sourcesContent":["import { useFormContext } from \"react-hook-form\";\r\n\r\nconst useRequest = (request, errorsMap) => {\r\n  const { setError, clearErrors, handleSubmit } = useFormContext();\r\n\r\n  const onRequest = async (e) => {\r\n    clearErrors();\r\n    return handleSubmit(async (params) => {\r\n      try {\r\n        await request(params);\r\n      } catch (error) {\r\n        if (error.response) {\r\n          return setError(\"global\", {\r\n            message: errorsMap[error?.response?.data.message || \"default\"],\r\n          });\r\n        }\r\n        if (!error.status) {\r\n          return setError(\"global\", {\r\n            message: \"It seems there was a problem, please try again\",\r\n          });\r\n        }\r\n      }\r\n    })(e);\r\n  };\r\n\r\n  return {\r\n    onRequest,\r\n  };\r\n};\r\n\r\nexport default useRequest;\r\n"],"mappings":"+RAAA,OAASA,cAAT,KAA+B,iBAA/B,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,OAAD,CAAUC,SAAV,CAAwB,CACzC,oBAAgDH,cAAc,EAA9D,CAAQI,QAAR,iBAAQA,QAAR,CAAkBC,WAAlB,iBAAkBA,WAAlB,CAA+BC,YAA/B,iBAA+BA,YAA/B,CAEA,GAAMC,CAAAA,SAAS,0FAAG,kBAAOC,CAAP,sHAChBH,WAAW,GADK,iCAETC,YAAY,2FAAC,iBAAOG,MAAP,4KAEVP,CAAAA,OAAO,CAACO,MAAD,CAFG,2FAIZ,YAAMC,QAJM,yDAKPN,QAAQ,CAAC,QAAD,CAAW,CACxBO,OAAO,CAAER,SAAS,CAAC,8EAAOO,QAAP,0DAAiBE,IAAjB,CAAsBD,OAAtB,GAAiC,SAAlC,CADM,CAAX,CALD,YASX,YAAME,MATK,0DAUPT,QAAQ,CAAC,QAAD,CAAW,CACxBO,OAAO,CAAE,gDADe,CAAX,CAVD,sEAAD,iEAAZ,CAeJH,CAfI,CAFS,0DAAH,kBAATD,CAAAA,SAAS,4CAAf,CAoBA,MAAO,CACLA,SAAS,CAATA,SADK,CAAP,CAGD,CA1BD,CA4BA,cAAeN,CAAAA,UAAf"},"metadata":{},"sourceType":"module"}