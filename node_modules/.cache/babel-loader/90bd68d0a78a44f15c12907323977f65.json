{"ast":null,"code":"import React,{useEffect}from\"react\";import{format}from\"date-fns\";import{useQuery}from\"react-query\";import TableIndicator from\"../../../core/indicators/TableIndicator\";import{getNotifications,updateNotificationsStatus}from\"../../../../api/notifications\";import useModal from\"../../../../hooks/useModal\";import Modal from\"../../../core/modal/Modal\";import CreateTicketForm from\"../../Tickets/CreateTicketForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Notifications=function Notifications(){var _useModal=useModal(),isOpen=_useModal.isOpen,onClose=_useModal.onClose,onOpen=_useModal.onOpen;var _useQuery=useQuery(\"notifications\",getNotifications,{refetchOnWindowFocus:false,onSuccess:function onSuccess(d){return updateNotificationsStatus(d.map(function(t){return t._id;}));}}),data=_useQuery.data,isLoading=_useQuery.isLoading,isError=_useQuery.isError;return/*#__PURE__*/_jsxs(\"div\",{className:\"card bg-dark h-100 text-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-9\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fs-1 fw-bold  mb-7 text-start d-flex justify-content-between \",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"d-inline-block position-relative ms-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Messages\"}),/*#__PURE__*/_jsx(\"span\",{className:\"d-inline-block position-absolute h-4px bottom-0 end-0 start-0 bg-success translate rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:onOpen,children:\"Create Message\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-responsive\",children:[/*#__PURE__*/_jsx(TableIndicator,{isLoading:isLoading}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"fw-bolder text-white\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"min-w-200px\",children:\"Content\"}),/*#__PURE__*/_jsx(\"th\",{className:\"min-w-150px\",children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:!isLoading&&!isError&&data.map(function(p){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"symbol symbol-45px me-5\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-start flex-column\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-white fw-bolder text-hover-primary fs-6 d-flex align-items-center\",children:[p.status===\"new\"&&/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-envelope-plus text-warning me-3 fs-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"span\",{children:p.content}),/*#__PURE__*/_jsxs(\"span\",{className:\"\".concat(p.sender===\"system\"?\"text-success\":\"text-primary\",\" fs-6 text-capitalize\"),children:[\"By: \",p.sender]})]})]})})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"text-white fw-bolder text-hover-primary d-block fs-6\",children:format(new Date(p.date),\"MM/dd/yyyy\")})})]},p._id);})})]})]})]}),/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onClose:onClose,title:\"Create Ticket\",children:/*#__PURE__*/_jsx(CreateTicketForm,{onClose:onClose})})]});};export default Notifications;","map":{"version":3,"names":["React","useEffect","format","useQuery","TableIndicator","getNotifications","updateNotificationsStatus","useModal","Modal","CreateTicketForm","Notifications","isOpen","onClose","onOpen","refetchOnWindowFocus","onSuccess","d","map","t","_id","data","isLoading","isError","p","status","content","sender","Date","date"],"sources":["C:/Users/maaya/ffc_finalpro/User_Interface/frontend/src/components/app/Dashboard/Dashboard-components/Notifications.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useQuery } from \"react-query\";\r\nimport TableIndicator from \"../../../core/indicators/TableIndicator\";\r\nimport {\r\n  getNotifications,\r\n  updateNotificationsStatus,\r\n} from \"../../../../api/notifications\";\r\nimport useModal from \"../../../../hooks/useModal\";\r\nimport Modal from \"../../../core/modal/Modal\";\r\nimport CreateTicketForm from \"../../Tickets/CreateTicketForm\";\r\n\r\nconst Notifications = () => {\r\n  const { isOpen, onClose, onOpen } = useModal();\r\n  const { data, isLoading, isError } = useQuery(\r\n    \"notifications\",\r\n    getNotifications,\r\n    {\r\n      refetchOnWindowFocus: false,\r\n      onSuccess: (d) => updateNotificationsStatus(d.map((t) => t._id)),\r\n    }\r\n  );\r\n  return (\r\n    <div className=\"card bg-dark h-100 text-white\">\r\n      <div className=\"card-body p-9\">\r\n        <div className=\"fs-1 fw-bold  mb-7 text-start d-flex justify-content-between \">\r\n          <span className=\"d-inline-block position-relative ms-2\">\r\n            <span>Messages</span>\r\n            <span className=\"d-inline-block position-absolute h-4px bottom-0 end-0 start-0 bg-success translate rounded\" />\r\n          </span>\r\n          <button type=\"button\" className=\"btn btn-primary\" onClick={onOpen}>\r\n            Create Message\r\n          </button>\r\n        </div>\r\n        <div className=\"table-responsive\">\r\n          <TableIndicator isLoading={isLoading} />\r\n          <table className=\"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4\">\r\n            <thead>\r\n              <tr className=\"fw-bolder text-white\">\r\n                <th className=\"min-w-200px\">Content</th>\r\n                <th className=\"min-w-150px\">Date</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {!isLoading &&\r\n                !isError &&\r\n                data.map((p) => (\r\n                  <tr key={p._id}>\r\n                    <td>\r\n                      <div className=\"d-flex align-items-center\">\r\n                        <div className=\"symbol symbol-45px me-5\" />\r\n                        <div className=\"d-flex justify-content-start flex-column\">\r\n                          <span className=\"text-white fw-bolder text-hover-primary fs-6 d-flex align-items-center\">\r\n                            {p.status === \"new\" && (\r\n                              <i className=\"bi bi-envelope-plus text-warning me-3 fs-2\" />\r\n                            )}\r\n                            <div className=\"d-flex flex-column\">\r\n                              <span>{p.content}</span>\r\n                              <span\r\n                                className={`${\r\n                                  p.sender === \"system\"\r\n                                    ? \"text-success\"\r\n                                    : \"text-primary\"\r\n                                } fs-6 text-capitalize`}\r\n                              >\r\n                                By: {p.sender}\r\n                              </span>\r\n                            </div>\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td>\r\n                      <a className=\"text-white fw-bolder text-hover-primary d-block fs-6\">\r\n                        {format(new Date(p.date), \"MM/dd/yyyy\")}\r\n                      </a>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      <Modal isOpen={isOpen} onClose={onClose} title=\"Create Ticket\">\r\n        <CreateTicketForm onClose={onClose} />\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notifications;\r\n"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,MAAT,KAAuB,UAAvB,CACA,OAASC,QAAT,KAAyB,aAAzB,CACA,MAAOC,CAAAA,cAAP,KAA2B,yCAA3B,CACA,OACEC,gBADF,CAEEC,yBAFF,KAGO,+BAHP,CAIA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,2BAAlB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,gCAA7B,C,wFAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1B,cAAoCH,QAAQ,EAA5C,CAAQI,MAAR,WAAQA,MAAR,CAAgBC,OAAhB,WAAgBA,OAAhB,CAAyBC,MAAzB,WAAyBA,MAAzB,CACA,cAAqCV,QAAQ,CAC3C,eAD2C,CAE3CE,gBAF2C,CAG3C,CACES,oBAAoB,CAAE,KADxB,CAEEC,SAAS,CAAE,mBAACC,CAAD,QAAOV,CAAAA,yBAAyB,CAACU,CAAC,CAACC,GAAF,CAAM,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,GAAT,EAAN,CAAD,CAAhC,EAFb,CAH2C,CAA7C,CAAQC,IAAR,WAAQA,IAAR,CAAcC,SAAd,WAAcA,SAAd,CAAyBC,OAAzB,WAAyBA,OAAzB,CAQA,mBACE,aAAK,SAAS,CAAC,+BAAf,wBACE,aAAK,SAAS,CAAC,eAAf,wBACE,aAAK,SAAS,CAAC,+DAAf,wBACE,cAAM,SAAS,CAAC,uCAAhB,wBACE,kCADF,cAEE,aAAM,SAAS,CAAC,4FAAhB,EAFF,GADF,cAKE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,CAAkD,OAAO,CAAET,MAA3D,4BALF,GADF,cAUE,aAAK,SAAS,CAAC,kBAAf,wBACE,KAAC,cAAD,EAAgB,SAAS,CAAEQ,SAA3B,EADF,cAEE,eAAO,SAAS,CAAC,kEAAjB,wBACE,oCACE,YAAI,SAAS,CAAC,sBAAd,wBACE,WAAI,SAAS,CAAC,aAAd,qBADF,cAEE,WAAI,SAAS,CAAC,aAAd,kBAFF,GADF,EADF,cAOE,uBACG,CAACA,SAAD,EACC,CAACC,OADF,EAECF,IAAI,CAACH,GAAL,CAAS,SAACM,CAAD,qBACP,mCACE,iCACE,aAAK,SAAS,CAAC,2BAAf,wBACE,YAAK,SAAS,CAAC,yBAAf,EADF,cAEE,YAAK,SAAS,CAAC,0CAAf,uBACE,cAAM,SAAS,CAAC,wEAAhB,WACGA,CAAC,CAACC,MAAF,GAAa,KAAb,eACC,UAAG,SAAS,CAAC,4CAAb,EAFJ,cAIE,aAAK,SAAS,CAAC,oBAAf,wBACE,sBAAOD,CAAC,CAACE,OAAT,EADF,cAEE,cACE,SAAS,WACPF,CAAC,CAACG,MAAF,GAAa,QAAb,CACI,cADJ,CAEI,cAHG,yBADX,kBAOOH,CAAC,CAACG,MAPT,GAFF,GAJF,GADF,EAFF,GADF,EADF,cAyBE,iCACE,UAAG,SAAS,CAAC,sDAAb,UACGxB,MAAM,CAAC,GAAIyB,CAAAA,IAAJ,CAASJ,CAAC,CAACK,IAAX,CAAD,CAAmB,YAAnB,CADT,EADF,EAzBF,GAASL,CAAC,CAACJ,GAAX,CADO,EAAT,CAHJ,EAPF,GAFF,GAVF,GADF,cA4DE,KAAC,KAAD,EAAO,MAAM,CAAER,MAAf,CAAuB,OAAO,CAAEC,OAAhC,CAAyC,KAAK,CAAC,eAA/C,uBACE,KAAC,gBAAD,EAAkB,OAAO,CAAEA,OAA3B,EADF,EA5DF,GADF,CAkED,CA5ED,CA8EA,cAAeF,CAAAA,aAAf"},"metadata":{},"sourceType":"module"}