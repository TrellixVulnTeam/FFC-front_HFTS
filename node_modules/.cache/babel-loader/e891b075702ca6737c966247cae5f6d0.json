{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/maaya/ffc_finalpro/User_Interface/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\maaya\\\\ffc_finalpro\\\\User_Interface\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import Input from\"../../components/core/form/input/Input\";import{FormProvider,useForm}from\"react-hook-form\";import{login}from\"../../api/auth-api\";import useAuth from\"../../hooks/useAuth\";import LoginSubheader from\"../../components/auth/LoginSubheader\";import{useNavigate,useSearchParams}from\"react-router-dom\";import FormError from\"../../components/core/form/FormError\";import useRequest from\"../../hooks/useRequest\";import SubmitBtn from\"../../components/core/form/submit-btn/SubmitBtn\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ERRORS_MAP={default:\"Incorrect Details, Please try again\"};var LoginForm=function LoginForm(){var _useAuth=useAuth(),setIsAuthenticated=_useAuth.setIsAuthenticated,setIsUserDoctor=_useAuth.setIsUserDoctor;var navigate=useNavigate();var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(loginForm){var _yield$login,_yield$login$data,user,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return login(loginForm);case 2:_yield$login=_context.sent;_yield$login$data=_yield$login.data;user=_yield$login$data.user;token=_yield$login$data.token;localStorage.setItem(\"user\",JSON.stringify(user));localStorage.setItem(\"token\",token);setIsAuthenticated(true);setIsUserDoctor(user.type===\"doctor\");navigate(\"/app/dashboard\");case 11:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var _useRequest=useRequest(onSubmit,ERRORS_MAP),onLogin=_useRequest.onRequest;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:onLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-dark mb-3\",children:\"Login In to FFC\"}),/*#__PURE__*/_jsx(LoginSubheader,{})]}),/*#__PURE__*/_jsx(FormError,{}),/*#__PURE__*/_jsx(Input,{name:\"email\",label:\"Email\",type:\"email\",rules:{required:\"Email is required\"}}),/*#__PURE__*/_jsx(Input,{name:\"password\",label:\"Password\",type:\"password\",rules:{required:\"Password is required\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"separator my-5\"}),/*#__PURE__*/_jsx(SubmitBtn,{submitText:\"Login\"})]});};export default LoginForm;","map":{"version":3,"names":["Input","FormProvider","useForm","login","useAuth","LoginSubheader","useNavigate","useSearchParams","FormError","useRequest","SubmitBtn","ERRORS_MAP","default","LoginForm","setIsAuthenticated","setIsUserDoctor","navigate","onSubmit","loginForm","data","user","token","localStorage","setItem","JSON","stringify","type","onLogin","onRequest","required"],"sources":["C:/Users/maaya/ffc_finalpro/User_Interface/frontend/src/components/auth/LoginForm.js"],"sourcesContent":["import Input from \"../../components/core/form/input/Input\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { login } from \"../../api/auth-api\";\r\nimport useAuth from \"../../hooks/useAuth\";\r\nimport LoginSubheader from \"../../components/auth/LoginSubheader\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport FormError from \"../../components/core/form/FormError\";\r\nimport useRequest from \"../../hooks/useRequest\";\r\nimport SubmitBtn from \"../../components/core/form/submit-btn/SubmitBtn\";\r\n\r\nconst ERRORS_MAP = {\r\n  default: \"Incorrect Details, Please try again\",\r\n};\r\n\r\nconst LoginForm = () => {\r\n  const { setIsAuthenticated, setIsUserDoctor } = useAuth();\r\n  const navigate = useNavigate();\r\n  const onSubmit = async (loginForm) => {\r\n    const {\r\n      data: { user, token },\r\n    } = await login(loginForm);\r\n    localStorage.setItem(\"user\", JSON.stringify(user));\r\n    localStorage.setItem(\"token\", token);\r\n    setIsAuthenticated(true);\r\n    setIsUserDoctor(user.type === \"doctor\");\r\n    navigate(\"/app/dashboard\");\r\n  };\r\n  const { onRequest: onLogin } = useRequest(onSubmit, ERRORS_MAP);\r\n\r\n  return (\r\n    <form onSubmit={onLogin}>\r\n      <div className=\"text-center mb-10\">\r\n        <h1 className=\"text-dark mb-3\">Login In to FFC</h1>\r\n        <LoginSubheader />\r\n      </div>\r\n      <FormError />\r\n      <Input\r\n        name=\"email\"\r\n        label=\"Email\"\r\n        type=\"email\"\r\n        rules={{\r\n          required: \"Email is required\",\r\n        }}\r\n      />\r\n      <Input\r\n        name=\"password\"\r\n        label=\"Password\"\r\n        type=\"password\"\r\n        rules={{\r\n          required: \"Password is required\",\r\n        }}\r\n      />\r\n      <div className=\"separator my-5\" />\r\n      <SubmitBtn submitText=\"Login\" />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n"],"mappings":"+RAAA,MAAOA,CAAAA,KAAP,KAAkB,wCAAlB,CACA,OAASC,YAAT,CAAuBC,OAAvB,KAAsC,iBAAtC,CACA,OAASC,KAAT,KAAsB,oBAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CACA,MAAOC,CAAAA,cAAP,KAA2B,sCAA3B,CACA,OAASC,WAAT,CAAsBC,eAAtB,KAA6C,kBAA7C,CACA,MAAOC,CAAAA,SAAP,KAAsB,sCAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,wBAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,iDAAtB,C,wFAEA,GAAMC,CAAAA,UAAU,CAAG,CACjBC,OAAO,CAAE,qCADQ,CAAnB,CAIA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,aAAgDT,OAAO,EAAvD,CAAQU,kBAAR,UAAQA,kBAAR,CAA4BC,eAA5B,UAA4BA,eAA5B,CACA,GAAMC,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CACA,GAAMW,CAAAA,QAAQ,0FAAG,iBAAOC,SAAP,sLAGLf,CAAAA,KAAK,CAACe,SAAD,CAHA,kEAEbC,IAFa,CAELC,IAFK,mBAELA,IAFK,CAECC,KAFD,mBAECA,KAFD,CAIfC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BC,IAAI,CAACC,SAAL,CAAeL,IAAf,CAA7B,EACAE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,KAA9B,EACAP,kBAAkB,CAAC,IAAD,CAAlB,CACAC,eAAe,CAACK,IAAI,CAACM,IAAL,GAAc,QAAf,CAAf,CACAV,QAAQ,CAAC,gBAAD,CAAR,CARe,uDAAH,kBAARC,CAAAA,QAAQ,4CAAd,CAUA,gBAA+BR,UAAU,CAACQ,QAAD,CAAWN,UAAX,CAAzC,CAAmBgB,OAAnB,aAAQC,SAAR,CAEA,mBACE,cAAM,QAAQ,CAAED,OAAhB,wBACE,aAAK,SAAS,CAAC,mBAAf,wBACE,WAAI,SAAS,CAAC,gBAAd,6BADF,cAEE,KAAC,cAAD,IAFF,GADF,cAKE,KAAC,SAAD,IALF,cAME,KAAC,KAAD,EACE,IAAI,CAAC,OADP,CAEE,KAAK,CAAC,OAFR,CAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAE,CACLE,QAAQ,CAAE,mBADL,CAJT,EANF,cAcE,KAAC,KAAD,EACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAC,UAFR,CAGE,IAAI,CAAC,UAHP,CAIE,KAAK,CAAE,CACLA,QAAQ,CAAE,sBADL,CAJT,EAdF,cAsBE,YAAK,SAAS,CAAC,gBAAf,EAtBF,cAuBE,KAAC,SAAD,EAAW,UAAU,CAAC,OAAtB,EAvBF,GADF,CA2BD,CA1CD,CA4CA,cAAehB,CAAAA,SAAf"},"metadata":{},"sourceType":"module"}